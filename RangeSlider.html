<div class="relative  h-5"> 
  <input type="range"
         onblur="scaleDownRangeSlider()"
         oninput="updateRangeSlider()"
         name="" id="rangeslider" 
         class="appearance-none w-full  bg-neutralInactive rounded-full 
                [&::-webkit-slider-thumb]:appearance-none 
                [&::-webkit-slider-thumb]:relative 
                [&::-webkit-slider-thumb]:rounded-full 
                [&::-webkit-slider-thumb]:cursor-pointer 
                [&::-webkit-slider-thumb]:w-5 
                [&::-webkit-slider-thumb]:h-5 " 
         min="0" max="100" 
         value="50" />
  <div class="h-full absolute top-0 left-0 pointer-events-none bg-primary-main rounded-full" id="track" >
  </div>
  <div id="rangeslider-icon" class="w-5 h-5 absolute bottom-0 left-1/2 -translate-x-1/2 z-[2] pointer-events-none">
    <svg aria-hidden="true" focusable="false" class="fill-white" width="22" height="22" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M14.4729 5C14.0587 5 13.7229 5.33566 13.7229 5.74971C13.7229 6.16376 14.0587 6.49941 14.4729 6.49941H17.1729C17.2833 6.49941 17.3729 6.58896 17.3729 6.69941V9.38586C17.3729 9.42859 17.3592 9.4702 17.3338 9.50458L14.154 13.8153C14.1163 13.8664 14.0566 13.8965 13.9931 13.8965H10.3729C10.2624 13.8965 10.1729 13.807 10.1729 13.6965V9.69816C10.1729 9.28411 9.83708 8.94846 9.42287 8.94846H6.02287C5.01565 8.94846 4.19446 9.18295 3.55495 9.62085C2.91419 10.0596 2.51456 10.6624 2.28321 11.297C1.833 12.5318 1.99469 13.9438 2.25118 14.8503C2.34251 15.1731 2.63726 15.3959 2.97287 15.3959H3.57306C3.52524 15.6066 3.5 15.8259 3.5 16.0511C3.5 17.6797 4.82076 18.9999 6.45 18.9999C8.07924 18.9999 9.4 17.6797 9.4 16.0511C9.4 15.8259 9.37476 15.6066 9.32694 15.3959H14.3718C14.6736 15.3959 14.9574 15.2527 15.1365 15.0099L18.6875 10.196C18.8079 10.0328 18.8729 9.83526 18.8729 9.63243V5.94963C18.8729 5.42516 18.4475 5 17.9229 5H14.4729ZM7.74379 15.3959H5.15621C5.05631 15.5927 5 15.8153 5 16.0511C5 16.8516 5.64919 17.5005 6.45 17.5005C7.25081 17.5005 7.9 16.8516 7.9 16.0511C7.9 15.8153 7.84369 15.5927 7.74379 15.3959ZM8.67287 13.8565C8.67287 13.8786 8.65496 13.8965 8.63287 13.8965H3.57325C3.46237 13.2317 3.45914 12.4506 3.69253 11.8104C3.83701 11.4141 4.06488 11.0892 4.40266 10.8579C4.74169 10.6257 5.25009 10.4479 6.02287 10.4479H8.63287C8.65496 10.4479 8.67287 10.4658 8.67287 10.4879V13.8565Z"></path><path d="M4.52344 5.99961C4.10922 5.99961 3.77344 6.3354 3.77344 6.74961C3.77344 7.16382 4.10922 7.49961 4.52344 7.49961H9.42344C9.83765 7.49961 10.1734 7.16382 10.1734 6.74961C10.1734 6.3354 9.83765 5.99961 9.42344 5.99961H4.52344Z"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M16.0957 16.0512C16.0957 14.4225 17.4165 13.1023 19.0457 13.1023C20.6749 13.1023 21.9957 14.4225 21.9957 16.0512C21.9957 17.6798 20.6749 19 19.0457 19C17.4165 19 16.0957 17.6798 16.0957 16.0512ZM19.0457 14.6017C18.2449 14.6017 17.5957 15.2507 17.5957 16.0512C17.5957 16.8517 18.2449 17.5006 19.0457 17.5006C19.8465 17.5006 20.4957 16.8517 20.4957 16.0512C20.4957 15.2507 19.8465 14.6017 19.0457 14.6017Z"></path></svg>
  </div>
  <div class="w-5 h-20 absolute bottom-5 left-1/2 transition-[scale] -translate-x-1/2 z-[2] pointer-events-none" id="selector">
    <div class="w-10 h-10 rotate-45 bg-secondary-main top-1/2 -translate-y-1/2 left-0 absolute rounded-tl-full rounded-tr-full rounded-bl-full">
      <span id="rangeslider-value" class="flex items-center justify-center w-full h-full font-bold -rotate-45 text-white"></span>
    </div>
  </div>
</div>

<script>
function scaleDownRangeSlider(){
  //Blur durumuna geçtiğinde boyutunu sıfırlıyoruz
  const selector = document.getElementById("selector");
  selector.style.scale = "0"
}
function updateRangeSlider() {
  // Range slider, selector (thumb), track ve displayed value elemanlarını seçiyoruz
  const rangeSlider = document.getElementById("rangeslider");
  const selector = document.getElementById("selector");
  const track = document.getElementById("track");
  const rangeSliderValue = document.querySelector("#rangeslider-value");
  const rangeSliderIcon = document.querySelector("#rangeslider-icon");
  // Slider'ın genişliğini, thumb'ın genişliğini, slider'ın mevcut değerini, min ve max değerlerini alıyoruz
  const sliderWidth = rangeSlider.clientWidth;
  const selectorWidth = selector.offsetWidth;
  const value = parseInt(rangeSlider.value, 10);
  const min = parseInt(rangeSlider.min, 10);
  const max = parseInt(rangeSlider.max, 10);

  // Thumb'ın konumunu hesaplıyoruz (thumb'ın genişliği de dikkate alınarak)
  // maxTrackWidth, thumb'ın maksimum kayabileceği alanı hesaplar: slider genişliği - thumb genişliği
  // Bu işlem, thumb'ın sağ tarafa taşarken slider'ın dışına çıkmamasını sağlar.
  const maxTrackWidth = sliderWidth - selectorWidth;

  // valuePercentage, mevcut değerin min ve max arasında nerede olduğunu hesaplar (oran olarak)
  // (value - min) / (max - min), değerin min ve max arasındaki yüzde olarak konumunu verir
  // Bu oran, slider uzunluğu ile çarpılarak thumb'ın gerçek konumunu bulmamıza yardımcı olur.
  const valuePercentage = (value - min) / (max - min);

  // selectorPosition, thumb'ın konumunu hesaplar
  // Thumb'ın kayabileceği maksimum alanı (maxTrackWidth) değerin yüzdesiyle çarparak
  // thumb'ın slider üzerindeki konumunu belirler.
  const selectorPosition = valuePercentage * maxTrackWidth;

  // Thumb'ın konumunu ayarlıyoruz
  selector.style.left = `${selectorPosition}px`;
  selector.style.scale = "1"
  rangeSliderIcon.style.left = `${selectorPosition}px`;

  // Track genişliğini hesaplıyoruz (track, thumb'ın merkezine kadar uzanmalı)
  // Track genişliği, thumb'ın pozisyonuna ek olarak thumb'ın yarısına kadar genişlemelidir
  // Bu, thumb ortalandığında track'in sonunun tam olarak thumb'ın ortasında olmasını sağlar.
  const trackWidth = selectorPosition + (selectorWidth / 2) * 2;
  track.style.width = `${trackWidth}px`;

  // Slider'ın mevcut değerini güncelliyoruz
  rangeSliderValue.innerHTML = value;
}

// Sayfa yüklendiğinde slider'ı başlatıyoruz
updateRangeSlider();
// Sayfa ve Tarayıcı zoom boyutu değişirse tekrar tetikle ki bug olmasın.
window.addEventListener("resize",updateRangeSlider)
</script>
